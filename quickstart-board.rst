Quickstart: Just the Board
=============================

.. note:: Before you begin...
    You will need a 5v USB-FTDI cable and a computer to work from (as a
    terminal). You will also need an Ethernet cable if you want wired
    networking.

First attach the FTDI cable with the USB side connected to your host machine
and the UART end connected to the Novena. The correct UART connection is
described on the `"Using Novena PVT1" wiki page
<http://kosagi.com/w/index.php?title=Using_Novena_PVT1>`_, and is shown below.

.. TODO:: better image of attached cable

.. figure:: /img/novena-uart-console-pvt2-photo.jpg
   :align: center
   :alt: Novena UART Console Cable (PVT2)
   :width: 100%
   :target: _images/novena-uart-console-pvt2-photo.jpg

   *Novena PVT2 board with FTDI UART cable attached to console port (note wire
   colors and orientation)*

Before powering on the Novena, open a terminal program on the work machine and
open the FTDI device using 115200 baud as the speed and "normal" settings for
everything else (eg, ``8n1``). Eg, on a UNIX machine you could use the
``screen`` command line program::

    screen /dev/ttyUSB0 115200
    # Should be a blank screen until the Novena boots.
    # Type "Ctrl-A" then "k" to quit when you are done.

Finally connect power to the Novena board's DC barrel jack. You should see
u-boot and then kernel boot messages stream out the console.

Eventually you will enter the `"first run" menu system
<http://www.kosagi.com/w/index.php?title=Novena-firstrun>`_, which was created
by ``xobs`` specifically for the Novena. You should be able to make reasonable
selections for yourself by reading the prompts; a US-centric set of defaults
for a headless (aka, no display) system might be:

 - "Configuring console-data": select "Don't touch keymap"
 - "Configuring locales": "en_US.UTF-8 UTF-8" or yours
 - "Configuring locales": the locale you selected
 - "Configuring tzdata": your region, or "none of the above" to get to UTC
 - Enter a new root password
 - Create a user account
 - Choose a hostname or accept the autogenerated one
 - Disable graphical logins

Following all the prompts, the system should get configured and you will be
able to login as the user you created. Horray!

The next step will be to get networking up and running so you can upgrade
and/or install new software.

.. note::
   You need a wired connection to install required tools before you can use the
   wireless interfaces.

**Configure Ethernet Networking**

Attach ethernet cable to a switch/router to the left-hand port (eth0). If DHCP
is enabled on the local network, the interface should be configured
automatically. Test the connection with::

    sudo ifconfig eth0
    sudo ping www.mit.edu

**Configure WiFi Networking**

.. warning:: The below isn't really a great way of doing things (and hasn't
   actually been confirmed to work), it's just a quick way to test.

.. TODO:: closed wifi hotspot, passwords

Install packages::

    sudo apt-get install wireless-tools iw

Connect to an open network named, eg, "31C3-open-legacy"::

    sudo iw dev wlan0 connect 31C3-open-legacy
    sudo dhclient wlan0

**After networking is configured**

Once networking is going, you should definately update the ``apt`` package
database, and you may wish to upgrade all existing packages (from the factory
image) to the most recent available versions.

The default configured debian mirror (to download updates from) is in the
United States.  You might want to change the ``/etc/apt/sources.list`` file to
point to something closer; changing to ``http.debian.net`` will auto-select a
good mirror wherever you are in the world.

To update package information, a process which should run reasonably fast even
the first time::

    sudo apt-get update

The ``upgrade`` step could take 30+ minutes all together, even given a fast
connection, because disk I/O operations on the built-in microSD card are very
slow. Don't start this process until you are patient enough to let it finish
without interruption. You don't really need to do the ``upgrade`` up front
before you start experimenting, it's just a good idea to stay patched with bug
fixes and security updates. To upgrade all packages with new versions, run::

    sudo apt-get upgrade

You may encounter a dpkg problem with the dbus package ("Package
libdbus-1-3:armhf is not configured yet."). If this happens run ``sudo apt-get
install -f`` to fix configuration, then ``sudo apt-get upgrade`` to finish the
upgrade.

You will almost certainly find youself needing i2c control utilities if you
will be hacking on the Novena, so now would be a good time to do::

    sudo apt-get install i2c-tools libi2c-dev

